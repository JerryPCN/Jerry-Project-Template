<div class="my-main-body-button">
    <span class="my-main-body-title">
        <i class="el-icon-view"></i>
        系统设置
    </span>
</div>

<el-tabs v-model="Tab" type="border-card">
    <el-tab-pane label="基础设置" name="n1">
        <el-form ref="commonForm" :model="Model" status-icon :show-message="false"
                 :label-width="Common.FormLabelWidth"
                 :label-suffix="Common.FormLabelSuffix">
            <el-form-item label="默认密码">
                <el-input prop="DefaultPassword" v-model="Model.DefaultPassword" required placeholder="默认密码"></el-input>
            </el-form-item>
            <el-form-item label="启用验证码">
                <el-switch prop="IsUseVerifyCode" v-model="Model.IsUseVerifyCode"></el-switch>
            </el-form-item>
            <el-form-item label="启用短信">
                <el-switch prop="IsUseSms" v-model="Model.IsUseSms"></el-switch>
            </el-form-item>
            <el-form-item label="提现手续税">
                <el-input-number prop="TaxPercentage" placeholder="提现手续税" v-model="Model.TaxPercentage" :step="0.001" :min="0.001" :max="1"></el-input-number>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @@click="submitForm('commonForm', save)">保存</el-button>
            </el-form-item>
        </el-form>
    </el-tab-pane>

    <el-tab-pane label="移动端首页设置" name="n2">
        <el-form ref="commonForm" :model="Model" status-icon :show-message="false"
                 :label-width="Common.FormLabelWidth"
                 :label-suffix="Common.FormLabelSuffix">
            <el-form-item label="上左名称">
                <el-input prop="TopLeftName" v-model="Model.TopLeftName" placeholder="上左名称"></el-input>
            </el-form-item>
            <el-form-item label="上左链接">
                <el-input prop="TopLeftUrl" v-model="Model.TopLeftUrl" placeholder="学车流程"></el-input>
            </el-form-item>
            <el-form-item label="上右名称">
                <el-input prop="TopRightName" v-model="Model.TopRightName" placeholder="TopRightName"></el-input>
            </el-form-item>
            <el-form-item label="上右链接">
                <el-input prop="TopRightUrl" v-model="Model.TopRightUrl" placeholder="TopRightUrl"></el-input>
            </el-form-item>
            <el-form-item label="下左名称">
                <el-input prop="BottomLeftName" v-model="Model.BottomLeftName" placeholder="下左名称"></el-input>
            </el-form-item>
            <el-form-item label="下左链接">
                <el-input prop="BottomLeftUrl" v-model="Model.BottomLeftUrl" placeholder="下左链接"></el-input>
            </el-form-item>
            <el-form-item label="下右名称">
                <el-input prop="BottomRightName" v-model="Model.BottomRightName" placeholder="下右名称"></el-input>
            </el-form-item>
            <el-form-item label="下右链接">
                <el-input prop="BottomRightUrl" v-model="Model.BottomRightUrl" placeholder="下右链接"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @@click="submitForm('commonForm', save)">保存</el-button>
            </el-form-item>
        </el-form>
    </el-tab-pane>

    <el-tab-pane label="邦币设置" name="n3">
        <el-form ref="commonForm" :model="Model" status-icon :show-message="false"
                 :label-width="Common.FormLabelWidth"
                 :label-suffix="Common.FormLabelSuffix">
            <el-tabs tab-position="left">
                <el-tab-pane label="普通邦币设置">
                    <el-form-item label="一级推荐邦币">
                        <el-input-number prop="RefereeScore" placeholder="一级推荐邦币" v-model="Model.RefereeScore" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="一级推荐描述">
                        <el-input prop="RefereeScoreDescription" v-model="Model.RefereeScoreDescription" placeholder="一级推荐描述"></el-input>
                    </el-form-item>
                    <el-form-item label="二级推荐邦币">
                        <el-input-number placeholder="二级推荐邦币" v-model="Model.ParentRefereeScore" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="二级推荐描述">
                        <el-input prop="ParentRefereeScoreDescription" v-model="Model.ParentRefereeScoreDescription" placeholder="二级推荐描述"></el-input>
                    </el-form-item>
                </el-tab-pane>
                <el-tab-pane label="累计邦币设置">
                    <el-form-item label="一级推荐累计人数">
                        <el-input-number prop="FirstCount" v-model="Model.FirstCount" placeholder="一级推荐累计人数" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="一级推荐每人邦币">
                        <el-input-number prop="FirstScore" v-model="Model.FirstScore" placeholder="一级推荐每人邦币" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="一级推荐累计描述">
                        <el-input prop="FirstDescription" v-model="Model.FirstDescription" placeholder="一级推荐累计描述"></el-input>
                    </el-form-item>
                    <el-form-item label="二级推荐累计人数">
                        <el-input-number prop="SecondCount" v-model="Model.SecondCount" placeholder="二级推荐累计人数" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="二级推荐每人邦币">
                        <el-input-number prop="SecondScore" v-model="Model.SecondScore" placeholder="二级推荐每人邦币" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="二级推荐累计描述">
                        <el-input prop="SecondDescription" v-model="Model.SecondDescription" placeholder="二级推荐累计描述"></el-input>
                    </el-form-item>
                </el-tab-pane>
                <el-tab-pane label="比赛邦币设置">
                    <el-form-item label="比赛累计人数">
                        <el-input-number prop="MatchCount" v-model="Model.MatchCount" placeholder="比赛累计人数" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="比赛每人邦币">
                        <el-input-number prop="MatchScore" v-model="Model.MatchScore" placeholder="比赛每人邦币" :min="1"></el-input-number>
                    </el-form-item>
                    <el-form-item label="比赛分享比例">
                        <el-input prop="GradePercentage" v-model="Model.GradePercentage" placeholder="比赛分享比例，请以+分隔，如：0.5+0.3+0.2"></el-input>
                    </el-form-item>
                    <el-form-item label="比赛累计描述">
                        <el-input prop="MatchDescription" v-model="Model.MatchDescription" placeholder="比赛累计描述"></el-input>
                    </el-form-item>
                </el-tab-pane>
            </el-tabs>
            <el-form-item>
                <el-button type="primary" @@click="submitForm('commonForm', save)">保存</el-button>
            </el-form-item>
        </el-form>
    </el-tab-pane>
    <el-tab-pane label="分享设置" name="n4">
        <el-form ref="commonForm" :model="Model" status-icon :show-message="false"
                 :label-width="Common.FormLabelWidth"
                 :label-suffix="Common.FormLabelSuffix">
            <el-form-item label="分享标题">
                <el-input prop="ShareTitle" v-model="Model.ShareTitle" required placeholder="分享标题"></el-input>
            </el-form-item>
            <el-form-item label="分享内容">
                <el-input prop="ShareContent" v-model="Model.ShareContent" required placeholder="分享内容"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @@click="submitForm('commonForm', save)">保存</el-button>
            </el-form-item>
        </el-form>
    </el-tab-pane>

    <el-tab-pane label="短信设置" name="n5">
        <el-form ref="smsForm" :model="Model" status-icon :show-message="false"
                 :label-width="Common.FormLabelWidth"
                 :label-suffix="Common.FormLabelSuffix">
            <el-form-item label="短信网关">
                <el-input prop="SmsGateway" v-model="Model.SmsGateway" required placeholder="短信网关"></el-input>
            </el-form-item>
            <el-form-item label="短信账号">
                <el-input prop="SmsAccount" v-model="Model.SmsAccount" required placeholder="短信账号"></el-input>
            </el-form-item>
            <el-form-item label="短信密码">
                <el-input prop="SmsPassword" v-model="Model.SmsPassword" required placeholder="短信密码"></el-input>
            </el-form-item>
            <el-form-item label="短信签名">
                <el-input prop="SmsSignature" v-model="Model.SmsSignature" required placeholder="短信签名"></el-input>
            </el-form-item>
            <el-form-item label="短信验证码模板">
                <el-input prop="SmsCodeTemplate" v-model="Model.SmsCodeTemplate" required placeholder="短信验证码模板"></el-input>
            </el-form-item>
            <el-form-item label="短信提现模板">
                <el-input prop="SmsPayTemplate" v-model="Model.SmsPayTemplate" required placeholder="SmsPayTemplate"></el-input>
            </el-form-item>
            <el-form-item>
                <el-button type="primary" @@click="submitForm('smsForm', save)">保存</el-button>
            </el-form-item>
        </el-form>
    </el-tab-pane>

    <el-tab-pane label="系统管理" name="n6">
        <el-form ref="smsForm" :model="Model" status-icon :show-message="false"
                 :label-width="Common.FormLabelWidth"
                 :label-suffix="Common.FormLabelSuffix">
            <el-form-item label="清空数据">
                <el-button type="danger" @@click="clearData()">清空数据</el-button>
            </el-form-item>
            <el-form-item label="重启站点">
                <el-button type="primary" @@click="restartSite()">重启站点</el-button>
            </el-form-item>
        </el-form>
    </el-tab-pane>
</el-tabs>

@section js{
<script>
    function getVueOptions() {
        return helper.getVueModelOptions({
            data: {
                Model: @(Html.Raw(TypeHelper.ToJson<SystemConfigModel>())),
                Tab: "n1"
            },
            mounted: function () {
                var _this = this;
                helper.post("/Admin/SystemConfig/Get", null, function (data) {
                    _this.Model = data;
                });
            },
            methods: {
                save: function () {
                    helper.post("/Admin/SystemConfig/Save", this.Model, function (data) {
                        helper._alert("保存成功。");
                    })
                }
            }
        });
    }
</script>
}